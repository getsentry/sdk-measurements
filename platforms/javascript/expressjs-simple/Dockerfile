FROM node:lts-alpine

ENV NODE_ENV production

ARG SENTRY_SDK_VERSION=master
ENV SENTRY_SDK_VERSION=$SENTRY_SDK_VERSION

ARG SENTRY_PORT_BACKEND=3000
ENV SENTRY_PORT_BACKEND=$SENTRY_PORT_BACKEND

ARG SENTRY_DSN=""
ENV SENTRY_DSN=$SENTRY_DSN

ARG APP_ENABLE_INSTRUMENTATION="0"
ENV APP_ENABLE_INSTRUMENTATION=$APP_ENABLE_INSTRUMENTATION

WORKDIR /express-simple

COPY . .

RUN yarn install

EXPOSE ${SENTRY_PORT_BACKEND}

ENTRYPOINT ["node", "index.js"]
